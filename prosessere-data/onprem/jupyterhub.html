<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">Jupyterhub | NADA</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://.nais.io/oslomet-nada-docs/oslomet-nada-docs/prosessere-data/onprem/jupyterhub"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Jupyterhub | NADA"><meta data-react-helmet="true" name="description" content="For analyser så anbefaler Dataplattform at man bruker Jupyter notebooks."><meta data-react-helmet="true" property="og:description" content="For analyser så anbefaler Dataplattform at man bruker Jupyter notebooks."><link data-react-helmet="true" rel="shortcut icon" href="/oslomet-nada-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://.nais.io/oslomet-nada-docs/oslomet-nada-docs/prosessere-data/onprem/jupyterhub"><link data-react-helmet="true" rel="alternate" href="https://.nais.io/oslomet-nada-docs/oslomet-nada-docs/prosessere-data/onprem/jupyterhub" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://.nais.io/oslomet-nada-docs/oslomet-nada-docs/prosessere-data/onprem/jupyterhub" hreflang="x-default"><link rel="stylesheet" href="/oslomet-nada-docs/assets/css/styles.3db205b2.css">
<link rel="preload" href="/oslomet-nada-docs/assets/js/runtime~main.4fb70a5d.js" as="script">
<link rel="preload" href="/oslomet-nada-docs/assets/js/main.fbadd1fc.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/oslomet-nada-docs/"><img src="/oslomet-nada-docs/img/nada.svg" alt="NADA logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/oslomet-nada-docs/img/nada-darkmode.svg" alt="NADA logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link navbar__link--active" href="/oslomet-nada-docs/">docs</a><a class="navbar__item navbar__link" href="/oslomet-nada-docs/konsepter">konsepter</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/navikt/oslomet-nada-docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/oslomet-nada-docs/">NADA</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Finne data</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Prosessere data</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/getting-started">Kom i gang</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/cloud-composer">Cloud Composer</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/naisjobs">Naisjobs</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/notebooks-gcp">Notebooks med tilgang til on-prem</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/notebooks">Notebooks</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">onprem</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/onprem/getting-started">Getting started</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/onprem/airflow">Airflow</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">dataverk</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/oslomet-nada-docs/prosessere-data/onprem/jupyterhub">Jupyterhub</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/onprem/vault">Vault</a></li></ul></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/oslomet-nada-docs/prosessere-data/scheduled-query">Bruk av federated queries og automatiske spørringer</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Dele data</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Dele innsikt</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Jupyterhub</h1></header><p>For analyser så anbefaler Dataplattform at man bruker <a href="https://jupyter.org/" target="_blank" rel="noopener noreferrer">Jupyter notebooks</a>.</p><p>Din JupyterHub blir lagd basert på en konfigurasjon i <a href="https://github.com/navikt/knada-jupyterhub" target="_blank" rel="noopener noreferrer">navikt/knada-jupyterhub</a>-repoet.
I repoet kan du legge til din egen konfigurasjon i <code>/configs</code> katalogen. </p><p>For å kunne sette opp en ny hub må man lage en Pull Request til dette repoet.
Da vil man også få generert en kryptert nøkkel som brukes av JupyterHub internt.
Derfor er det viktig at man har linjeskift på slutten av konfigurasjonen.</p><p>Ved hver ny pull request (og endringer) blir sjekker kjørt automatisk.
Når disse sjekkene er godkjente (lyser grønt), kan du selv merge inn din pull request.
Du trenger altså <em>ikke</em> vente på godkjenning.</p><p>Nedenfor ser du et eksempel på det man minimum trenger å fylle ut.
Med denne konfigurasjonen får man en hub med 2GB minne, og 0.5 CPU.
Hub-en kan nåes på <code>https://kyrre.jupyter.adeo.no</code> og det er kun bruker <code>e152435</code> som kan logge inn.</p><p><code>/configs/kyrre.yaml</code></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">namespace: kyrre-havik-eriksen</span></span><span class="token-line" style="color:#393A34"><span class="token plain">ingress: kyrre</span></span><span class="token-line" style="color:#393A34"><span class="token plain">users:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  - e152435</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Alle verdier kan endres etter behov.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="konfigurasjon"></a>Konfigurasjon<a class="hash-link" href="#konfigurasjon" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="namespace"></a>Namespace<a class="hash-link" href="#namespace" title="Direct link to heading">#</a></h3><p>Hvilket <code>namespace</code> hub-en skal kjøre i.
Endrer du denne vil det bli opprettet en ny hub, og den gamle vil fortsatt leve.
Se <a href="#slette-en-hub">Slette en hub</a> nedenfor hvis du bytter namespace.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="ingress"></a>Ingress<a class="hash-link" href="#ingress" title="Direct link to heading">#</a></h3><p>Hvilken adresse du kan nå hub-en på.
Det du setter i <code>ingress</code> blir slått sammen med <code>.jupyter.adeo.no</code>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="users"></a>Users<a class="hash-link" href="#users" title="Direct link to heading">#</a></h3><p>Dette er en liste over hvem som skal ha tilgang til å kunne logge inn på hub-en.
Her bruker vi NAV-identen (med små bokstaver).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="egne-miljøvariabler"></a>Egne miljøvariabler<a class="hash-link" href="#egne-miljøvariabler" title="Direct link to heading">#</a></h3><p>Har du behov for egne miljøvariabler, kan de legges under <code>extraEnvs</code> i konfigurasjonen din:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">extraEnvs:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  - &quot;hello: world&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Hver linje må starte med <code>-</code>/bindestrek, og være innen for anførselstegn.
Dette fordi den blir tolket som en ren streng, og ikke som en nøkkel og verdi.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="jupyter-i-stedet-for-jupyterlabs"></a>Jupyter i stedet for JupyterLabs<a class="hash-link" href="#jupyter-i-stedet-for-jupyterlabs" title="Direct link to heading">#</a></h3><p>Om du ønsker å bruke Jupyter i stedet for JupyterLabs kan du legge til følgende i konfigurasjonen din:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">jupyterLabs: false</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="endre-ressurser"></a>Endre ressurser<a class="hash-link" href="#endre-ressurser" title="Direct link to heading">#</a></h3><p>Har du behov for mer/mindre ressurser enn det som er default, kan du bruke variablene <code>memoryLimit</code> og <code>cpuLimit</code> i din konfigurasjon.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">memoryLimit: 10GB</span></span><span class="token-line" style="color:#393A34"><span class="token plain">cpuLimit: 1</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Hvis jupyterhub serveren du endrer ressurskonfigurasjonen for kjører når du endrer <code>memoryLimit</code>/<code>cpuLimit</code> må du restarte serveren
for at endringene skal tre i kraft. For å restarte serveren se <a href="#restarte-jupyterhub-server">Restarte jupyterhub server</a></p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Jupyterhub følger strengt med på hvor mye ressurser du bruker, og vil drepe kernel hvis du bruker mer enn du har bedt om.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="restarte-jupyterhub-server"></a>Restarte jupyterhub server<a class="hash-link" href="#restarte-jupyterhub-server" title="Direct link to heading">#</a></h2><p>For å restarte serveren gjøres følgende:</p><ol><li>Gå til <code>https://&lt;ingress&gt;.jupyter.adeo.no/home</code></li><li>Trykk <code>Stop My Server</code></li><li>Når du igjen får muligheten til å starte serveren trykker du <code>Start My Server</code></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="slette-en-hub"></a>Slette en hub<a class="hash-link" href="#slette-en-hub" title="Direct link to heading">#</a></h2><p>Vi har ingen automatikk for sletting av hub-er, så dette må gjøres manuelt av en av administratorene.
Ta kontakt i <a href="https://nav-it.slack.com/archives/CGRMQHT50" target="_blank" rel="noopener noreferrer">#knada</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="fjerne-brukere"></a>Fjerne brukere<a class="hash-link" href="#fjerne-brukere" title="Direct link to heading">#</a></h2><p>For å fjerne brukere fra et jupyterhub namespace gjør som følger:</p><ul><li>Fjern identen(e) fra <code>users</code> listen i konfigurasjonsfilen under <code>/config</code> i <a href="https://github.com/navikt/knada-jupyterhub" target="_blank" rel="noopener noreferrer">iac-repoet</a></li><li>Logg inn på hubens admin side (<code>https://&lt;ingress&gt;.jupyter.adeo.no/hub/admin</code>) og slett brukeren(e) fra databasen.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="remote-jupyterhub-tilkoblingen"></a>Remote Jupyterhub tilkoblingen<a class="hash-link" href="#remote-jupyterhub-tilkoblingen" title="Direct link to heading">#</a></h2><p>Ønsker du å koble til remote Jupyterhub fra Visual Studio Code lokalt, gjør som følger:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="lag-jupyterhub-api-token"></a>Lag Jupyterhub API token<a class="hash-link" href="#lag-jupyterhub-api-token" title="Direct link to heading">#</a></h3><ol><li>Gå til <code>https://&lt;ingress&gt;.jupyter.adeo.no/home</code></li><li>Trykk <code>token</code> øverst til venstre</li><li>Trykk <code>Request new API token</code></li><li>Lagre det genererte tokenet lokalt</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="koble-til-fra-visual-studio-code"></a>Koble til fra Visual Studio Code<a class="hash-link" href="#koble-til-fra-visual-studio-code" title="Direct link to heading">#</a></h3><p>Når du har laget et API token kan du koble deg til Jupyterhub serveren.</p><ol><li>Installer Jupyter extension for Visual Studio Code
<img alt="Jupyter extension" src="/oslomet-nada-docs/assets/images/jupyter-extension-5cd9536ffd3bad3424ef875b5c8171ac.png"></li><li>Trykk <code>cntrl+shift+P</code> (windows) eller <code>cmd+shift+P</code> (mac)</li><li>Søk etter <code>Jupyter: Specify local or remote Jupyter server for connections</code></li><li>Velg <code>Existing</code></li><li>Skriv inn URIen til den kjørende jupytehrub serveren,
dvs. <code>https://&lt;ingress&gt;.jupyter.adeo.no/user/&lt;nav-ident&gt;/?token=&lt;token&gt;</code>. Erstatt ingress og NAV ident, og token med
tokenet generert i <a href="#create-jupyterhub-api-token">Create Jupyterhub API token</a></li><li>Logg inn med NAV ident og passord</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/navikt/nada/edit/main/docs/prosessere-data/onprem/jupyterhub.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/oslomet-nada-docs/prosessere-data/onprem/dataverk/slette-datapakker"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Sletting av datapakker</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/oslomet-nada-docs/prosessere-data/onprem/vault"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Vault »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#konfigurasjon" class="table-of-contents__link">Konfigurasjon</a><ul><li><a href="#namespace" class="table-of-contents__link">Namespace</a></li><li><a href="#ingress" class="table-of-contents__link">Ingress</a></li><li><a href="#users" class="table-of-contents__link">Users</a></li><li><a href="#egne-miljøvariabler" class="table-of-contents__link">Egne miljøvariabler</a></li><li><a href="#jupyter-i-stedet-for-jupyterlabs" class="table-of-contents__link">Jupyter i stedet for JupyterLabs</a></li><li><a href="#endre-ressurser" class="table-of-contents__link">Endre ressurser</a></li></ul></li><li><a href="#restarte-jupyterhub-server" class="table-of-contents__link">Restarte jupyterhub server</a></li><li><a href="#slette-en-hub" class="table-of-contents__link">Slette en hub</a></li><li><a href="#fjerne-brukere" class="table-of-contents__link">Fjerne brukere</a></li><li><a href="#remote-jupyterhub-tilkoblingen" class="table-of-contents__link">Remote Jupyterhub tilkoblingen</a><ul><li><a href="#lag-jupyterhub-api-token" class="table-of-contents__link">Lag Jupyterhub API token</a></li><li><a href="#koble-til-fra-visual-studio-code" class="table-of-contents__link">Koble til fra Visual Studio Code</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/oslomet-nada-docs/assets/js/runtime~main.4fb70a5d.js"></script>
<script src="/oslomet-nada-docs/assets/js/main.fbadd1fc.js"></script>
</body>
</html>