"use strict";(self.webpackChunknada=self.webpackChunknada||[]).push([[42],{3905:function(e,t,n){n.d(t,{Zo:function(){return k},kt:function(){return d}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},k=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,k=l(e,["components","mdxType","originalType","parentName"]),c=p(n),d=a,g=c["".concat(s,".").concat(d)]||c[d]||m[d]||o;return n?r.createElement(g,i(i({ref:t},k),{},{components:n})):r.createElement(g,i({ref:t},k))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},8657:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return p},toc:function(){return k},default:function(){return c}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={title:"Notebooks med tilgang til on-prem"},s=void 0,p={unversionedId:"prosessere-data/notebooks-gcp",id:"prosessere-data/notebooks-gcp",isDocsHomePage:!1,title:"Notebooks med tilgang til on-prem",description:"Et teamprosjekt i GCP har av sikkerhetsmessige \xe5rsaker ikke tilgang til datakilder on-prem.",source:"@site/docs/prosessere-data/notebooks-gcp.md",sourceDirName:"prosessere-data",slug:"/prosessere-data/notebooks-gcp",permalink:"/prosessere-data/notebooks-gcp",editUrl:"https://github.com/navikt/nada/edit/main/docs/prosessere-data/notebooks-gcp.md",tags:[],version:"current",frontMatter:{title:"Notebooks med tilgang til on-prem"},sidebar:"docs",previous:{title:"Naisjobs",permalink:"/prosessere-data/naisjobs"},next:{title:"Notebooks",permalink:"/prosessere-data/notebooks"}},k=[{value:"Lage notebook",id:"lage-notebook",children:[]},{value:"Credentials og hemmeligheter.",id:"credentials-og-hemmeligheter",children:[]},{value:"Maskintype og GPU",id:"maskintype-og-gpu",children:[]},{value:"Stoppe en maskin",id:"stoppe-en-maskin",children:[]},{value:"Slette en maskin",id:"slette-en-maskin",children:[]}],m={toc:k};function c(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Et teamprosjekt i GCP har av sikkerhetsmessige \xe5rsaker ikke tilgang til datakilder on-prem.\nAll den tid mange relevante datakilder kun er tilgjengelig on-premises, er det etablert en l\xf8sning for \xe5 n\xe5 disse datakildene via et eget prosjekt."),(0,o.kt)("h2",{id:"lage-notebook"},"Lage notebook"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Ta kontakt med oss i ",(0,o.kt)("a",{parentName:"li",href:"https://nav-it.slack.com/archives/CGRMQHT50"},"#nada")," for \xe5 f\xe5 tilgang til dette prosjektet."),(0,o.kt)("li",{parentName:"ol"},"G\xe5 til ",(0,o.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/vertex-ai/workbench/list/instances?orgonly=true&project=knada-gcp&supportedpurview=organizationId"},"knada-gcp Google console")),(0,o.kt)("li",{parentName:"ol"},"Velg ",(0,o.kt)("inlineCode",{parentName:"li"},"New Notebook")," og velg ",(0,o.kt)("inlineCode",{parentName:"li"},"Customize")),(0,o.kt)("li",{parentName:"ol"},"Fyll inn alle obligatoriske felter:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Notebook name - Navn p\xe5 kladdeboka"),(0,o.kt)("li",{parentName:"ul"},"Region - europe-west1 (Belgium)"),(0,o.kt)("li",{parentName:"ul"},"Zone - En sone innenfor regionen"),(0,o.kt)("li",{parentName:"ul"},"Environment - Velg et milj\xf8 som passer ditt behov/spr\xe5k"),(0,o.kt)("li",{parentName:"ul"},"Machine type og GPU - Hvor kraftig maskin du trenger"))),(0,o.kt)("li",{parentName:"ol"},"Ekspander ",(0,o.kt)("inlineCode",{parentName:"li"},"Networking"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Under ",(0,o.kt)("inlineCode",{parentName:"li"},"External IP")," velg none"))),(0,o.kt)("li",{parentName:"ol"},"Ekspander ",(0,o.kt)("inlineCode",{parentName:"li"},"Permission"),(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Under ",(0,o.kt)("inlineCode",{parentName:"li"},"Access to JupyterLab")," velg ",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"Single user only")," "))))),(0,o.kt)("li",{parentName:"ol"},"Trykk ",(0,o.kt)("inlineCode",{parentName:"li"},"Create")),(0,o.kt)("li",{parentName:"ol"},"N\xe5r maskinen er ferdig laget, kan du trykke p\xe5 ",(0,o.kt)("inlineCode",{parentName:"li"},"Open jupyterlab")," for \xe5 f\xe5 tilgang.")),(0,o.kt)("h2",{id:"credentials-og-hemmeligheter"},"Credentials og hemmeligheter."),(0,o.kt)("p",null,"Det anbefales \xe5 lagre brukernavn, passord o.l. for notebooken din i ",(0,o.kt)("a",{parentName:"p",href:"https://console.cloud.google.com/security/secret-manager?project=knada-gcp"},"Secret manager"),"."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"G\xe5 til ",(0,o.kt)("a",{parentName:"li",href:"https://console.cloud.google.com/security/secret-manager?project=knada-gcp"},"Secret manager")),(0,o.kt)("li",{parentName:"ol"},"Legg inn relevante verdier i din hemmelighet.")),(0,o.kt)("p",null,"For at notebooken skal kunne bruke din personlige bruker n\xe5r den henter hemmeligheter fra secret manager, m\xe5 du gi den tilgang til det ved \xe5 kj\xf8re f\xf8lgende kommando fra en notebook-terminal:\n",(0,o.kt)("inlineCode",{parentName:"p"},"gcloud auth application-default login"),"\nDeretter legge inn secret-manager-pakken:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"pip install google-cloud-secret-manager\n")),(0,o.kt)("p",null,"Du kan n\xe5 kj\xf8re f\xf8lgende kode i din notebook for \xe5 hente hemmeligheten."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python"},"from google.cloud import secretmanager\nsecrets = secretmanager.SecretManagerServiceClient()\n\nresource_name = f\"projects/knada-gcp/secrets/<navn p\xe5 hemmelighet>/versions/latest\"\nsecret = secrets.access_secret_version(name=resource_name)\nsecret.payload.data.decode('UTF-8')\n")),(0,o.kt)("h2",{id:"maskintype-og-gpu"},"Maskintype og GPU"),(0,o.kt)("p",null,"Det er du som vet best hva du trenger, derfor er det ingen begrensninger p\xe5 hva du kan velge av maskin og GPU.\nBare husk at det kan bli veldig kostbart hvis du lar en maskin (med mye minne og GPU) st\xe5 uten at den blir brukt."),(0,o.kt)("h2",{id:"stoppe-en-maskin"},"Stoppe en maskin"),(0,o.kt)("p",null,"Har du en maskin du ikke trenger for en periode, men ikke \xf8nsker \xe5 ",(0,o.kt)("a",{parentName:"p",href:"#slette-en-maskin"},"slette"),", s\xe5 kan du stoppe den.\nVelg maskinen i ",(0,o.kt)("a",{parentName:"p",href:"https://console.cloud.google.com/ai-platform/notebooks/instances"},"oversikten")," og trykk ",(0,o.kt)("inlineCode",{parentName:"p"},"STOP")," i toppen."),(0,o.kt)("h2",{id:"slette-en-maskin"},"Slette en maskin"),(0,o.kt)("p",null,"Har du en maskin du ikke trenger lenger, s\xe5 kan du slette den.\nVelg maskinen i ",(0,o.kt)("a",{parentName:"p",href:"https://console.cloud.google.com/ai-platform/notebooks/instances"},"oversikten")," og trykk ",(0,o.kt)("inlineCode",{parentName:"p"},"DELETE")," i toppen."))}c.isMDXComponent=!0}}]);